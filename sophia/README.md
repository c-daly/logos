# Sophia - Non-linguistic Cognitive Core

This directory contains the skeleton modules for the Sophia cognitive architecture, implementing non-linguistic reasoning using the Hybrid Causal Graph (HCG).

## Overview

Sophia is the cognitive core of Project LOGOS, designed around the principle of **non-linguistic cognition first**. All internal reasoning occurs in abstract causal graph structures, not natural language.

Reference: Section 3.3 of the LOGOS specification (`docs/spec/project_logos_full.md`)

## Components

### 1. Orchestrator
**Module**: `orchestrator.py`  
**Responsibilities**:
- Manages overall control flow and subsystem coordination
- Implements state machine for system lifecycle
- Handles inter-subsystem message passing
- Manages subsystem registration and lifecycle

**Reference**: Section 3.3, Workstream B1

### 2. CWM-A (Continuous World Model - Abstract)
**Module**: `cwm_a.py`  
**Responsibilities**:
- Maintains current abstract state representation in the HCG
- Provides state query API for the Planner
- Emits state change events
- Updates from HCG (Neo4j + Milvus)

**Key Concepts**:
- Operates on abstract representations (Entities, Concepts, States, Processes)
- Maintains semantic understanding independent of physical grounding
- Bridges high-level reasoning with graph-based knowledge

**Reference**: Section 3.3, Workstream B2

### 3. CWM-G (Continuous World Model - Grounded)
**Module**: `cwm_g.py`  
**Responsibilities**:
- Maintains grounded physical/sensor state representation
- Processes sensor data from Talos
- Tracks physical entity positions and orientations
- Bridges abstract reasoning with physical reality

**Key Concepts**:
- Operates on grounded representations (sensor readings, physical coordinates)
- Sensor fusion for multi-modal state estimation (Phase 2+)
- Maps abstract entities to physical measurements

**Reference**: Section 3.3, Phase 2 (Section 7.2)

### 4. Planner
**Module**: `planner.py`  
**Responsibilities**:
- Generates action plans using causal reasoning over the HCG
- Implements backward chaining from goal to current state
- Validates plans against SHACL constraints
- Estimates plan costs

**Planning Approach**:
1. Start from goal state (target State node in HCG)
2. Backward chain through CAUSES relationships
3. Find Process nodes that can achieve required states
4. Continue until current state is reached
5. Validate plan against SHACL constraints

**Reference**: Section 3.3, Workstream B3

### 5. Executor
**Module**: `executor.py`  
**Responsibilities**:
- Executes plans generated by the Planner
- Monitors execution outcomes
- Manages success/failure callbacks
- Interfaces with Talos for physical execution (stub in Phase 1)

**Execution Flow**:
1. Receive plan from Planner
2. Iterate through actions in sequence
3. For each action: check preconditions, execute, monitor, update HCG
4. Report success/failure via callbacks

**Reference**: Section 3.3, Workstream B4

## Architecture Principles

### Non-linguistic Cognition
All internal processing occurs in graph-structured representations, not natural language. Language is treated as an I/O modality only, handled by the Hermes component.

### Causal Coherence
All reasoning maintains explicit causal relationships and temporal ordering via the HCG's CAUSES edges and State nodes.

### Validation by Constraint
Multi-level validation ensures logical consistency. Plans are validated against SHACL constraints before and during execution.

## Development Status

**Phase 1**: These are skeleton modules with stub implementations. They establish:
- Class structures and interfaces
- Key methods and their signatures
- Documentation aligned with the specification
- Unit test coverage

**Phase 2+**: Full implementations will include:
- HCG integration (Neo4j queries, Milvus embeddings)
- SHACL validation
- Talos integration for physical execution
- Sensor fusion (CWM-G)
- Learning-based planning

## Testing

Run tests for the Sophia modules:
```bash
poetry run pytest tests/sophia/ -v
```

## Integration with Other Components

- **HCG (Neo4j + Milvus)**: All modules read/write to the Hybrid Causal Graph
- **Hermes**: Used for text embeddings and NLP utilities (via Orchestrator)
- **Talos**: Executor interfaces with Talos for physical execution
- **Apollo**: Orchestrator receives commands from Apollo UI

## Next Steps (Phase 1)

1. **B1**: Complete Orchestrator implementation with control flow state machine
2. **B2**: Implement CWM-A with HCG integration
3. **B3**: Implement Planner with graph traversal-based planning
4. **B4**: Complete Executor stub with Talos simulation
5. **B5**: End-to-end integration ("Pick up cup" scenario)

See `docs/action_items.md` for detailed task breakdown.

## References

- **Full Specification**: `docs/spec/project_logos_full.md` (Section 3.3)
- **Action Items**: `docs/action_items.md` (Workstream B)
- **EPOCHS**: `.github/EPOCHS.md` (Epoch 3: Cognitive Core & Reasoning)
- **HCG Ontology**: `ontology/core_ontology.cypher`
- **SHACL Shapes**: `ontology/shacl_shapes.ttl`

---

**Note**: This sophia directory is currently in the LOGOS meta-repository as part of Epoch 1 infrastructure setup. These modules will eventually be moved to the `c-daly/sophia` repository as part of the ecosystem separation.
