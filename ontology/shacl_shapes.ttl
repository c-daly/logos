@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix logos: <http://logos.ontology/> .

# LOGOS HCG SHACL Shapes â€” Level 1 Deterministic Validation
# See Project LOGOS spec: Section 4.3.1 (SHACL shapes for validation).
# Minimal, syntactically valid scaffold to be extended per spec.

# Entity shape with extended properties for pick-and-place domain
logos:EntityShape
    a sh:NodeShape ;
    sh:targetClass logos:Entity ;
    rdfs:label "Entity Shape" ;
    rdfs:comment "Validates concrete objects and agents in the world" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^entity-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for entity, must start with 'entity-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
    ] ;
    sh:property [
        sh:path logos:description ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Description" ;
    ] ;
    sh:property [
        sh:path logos:created_at ;
        sh:maxCount 1 ;
        rdfs:label "Creation Timestamp" ;
    ] .

# Concept shape with extended constraints
logos:ConceptShape
    a sh:NodeShape ;
    sh:targetClass logos:Concept ;
    rdfs:label "Concept Shape" ;
    rdfs:comment "Validates abstract categories and types" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^concept-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for concept, must start with 'concept-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
        rdfs:comment "Unique name for concept" ;
    ] ;
    sh:property [
        sh:path logos:description ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Description" ;
    ] .

# State shape with temporal and spatial property constraints
logos:StateShape
    a sh:NodeShape ;
    sh:targetClass logos:State ;
    rdfs:label "State Shape" ;
    rdfs:comment "Validates temporal snapshots of entity properties" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^state-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for state, must start with 'state-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "Time when this state occurred" ;
    ] ;
    sh:property [
        sh:path logos:position_x ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Position X coordinate" ;
    ] ;
    sh:property [
        sh:path logos:position_y ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Position Y coordinate" ;
    ] ;
    sh:property [
        sh:path logos:position_z ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Position Z coordinate" ;
    ] ;
    sh:property [
        sh:path logos:orientation_roll ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Orientation roll angle" ;
    ] ;
    sh:property [
        sh:path logos:orientation_pitch ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Orientation pitch angle" ;
    ] ;
    sh:property [
        sh:path logos:orientation_yaw ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Orientation yaw angle" ;
    ] .

# Process shape with temporal and causal constraints
logos:ProcessShape
    a sh:NodeShape ;
    sh:targetClass logos:Process ;
    rdfs:label "Process Shape" ;
    rdfs:comment "Validates causal transformations between states" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^process-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for process, must start with 'process-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
    ] ;
    sh:property [
        sh:path logos:description ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Description" ;
    ] ;
    sh:property [
        sh:path logos:start_time ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Start Time" ;
        rdfs:comment "Time when process started" ;
    ] ;
    sh:property [
        sh:path logos:duration_ms ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        rdfs:label "Duration (milliseconds)" ;
        rdfs:comment "Process duration in milliseconds" ;
    ] .

# Additional domain-specific shapes for pick-and-place

# Spatial properties validation
logos:SpatialPropertiesShape
    a sh:NodeShape ;
    rdfs:label "Spatial Properties Shape" ;
    rdfs:comment "Validates spatial properties like position and orientation" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:width ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Width" ;
    ] ;
    sh:property [
        sh:path logos:height ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Height" ;
    ] ;
    sh:property [
        sh:path logos:depth ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Depth" ;
    ] ;
    sh:property [
        sh:path logos:radius ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Radius" ;
    ] ;
    sh:property [
        sh:path logos:mass ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Mass (kg)" ;
    ] .

# Gripper-specific properties validation
logos:GripperPropertiesShape
    a sh:NodeShape ;
    rdfs:label "Gripper Properties Shape" ;
    rdfs:comment "Validates gripper-specific properties" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:max_grasp_width ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Maximum Grasp Width" ;
    ] ;
    sh:property [
        sh:path logos:max_force ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Maximum Force (N)" ;
    ] .

# Joint-specific properties validation
logos:JointPropertiesShape
    a sh:NodeShape ;
    rdfs:label "Joint Properties Shape" ;
    rdfs:comment "Validates joint-specific properties" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:joint_type ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ( "revolute" "prismatic" "fixed" "continuous" ) ;
        rdfs:label "Joint Type" ;
    ] ;
    sh:property [
        sh:path logos:min_angle ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Minimum Angle (radians)" ;
    ] ;
    sh:property [
        sh:path logos:max_angle ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Maximum Angle (radians)" ;
    ] .

# Relationship validation shapes

logos:IsARelationshipShape
    a sh:NodeShape ;
    rdfs:label "IS_A Relationship Shape" ;
    rdfs:comment "Validates type membership relationships" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:IS_A ;
        sh:class logos:Concept ;
        rdfs:label "Type Membership" ;
        rdfs:comment "Entity must be instance of a Concept" ;
    ] .

logos:HasStateRelationshipShape
    a sh:NodeShape ;
    rdfs:label "HAS_STATE Relationship Shape" ;
    rdfs:comment "Validates entity-state relationships" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:HAS_STATE ;
        sh:class logos:State ;
        rdfs:label "Current State" ;
        rdfs:comment "Entity can have one or more states" ;
    ] .

logos:CausesRelationshipShape
    a sh:NodeShape ;
    rdfs:label "CAUSES Relationship Shape" ;
    rdfs:comment "Validates process-state causal relationships" ;
    sh:targetClass logos:Process ;
    sh:property [
        sh:path logos:CAUSES ;
        sh:class logos:State ;
        rdfs:label "Causes State" ;
        rdfs:comment "Process must cause at least one state" ;
    ] .

logos:PartOfRelationshipShape
    a sh:NodeShape ;
    rdfs:label "PART_OF Relationship Shape" ;
    rdfs:comment "Validates compositional hierarchy between entities" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:PART_OF ;
        sh:class logos:Entity ;
        rdfs:label "Part Of" ;
        rdfs:comment "Entity can be part of another entity" ;
    ] .

logos:LocatedAtRelationshipShape
    a sh:NodeShape ;
    rdfs:label "LOCATED_AT Relationship Shape" ;
    rdfs:comment "Validates spatial relationships between entities" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:LOCATED_AT ;
        sh:class logos:Entity ;
        rdfs:label "Located At" ;
        rdfs:comment "Entity can be located at another entity" ;
    ] .

logos:AttachedToRelationshipShape
    a sh:NodeShape ;
    rdfs:label "ATTACHED_TO Relationship Shape" ;
    rdfs:comment "Validates physical attachment between entities" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:ATTACHED_TO ;
        sh:class logos:Entity ;
        rdfs:label "Attached To" ;
        rdfs:comment "Entity can be physically attached to another entity" ;
    ] .

logos:PrecedesRelationshipShape
    a sh:NodeShape ;
    rdfs:label "PRECEDES Relationship Shape" ;
    rdfs:comment "Validates temporal ordering between states" ;
    sh:targetClass logos:State ;
    sh:property [
        sh:path logos:PRECEDES ;
        sh:class logos:State ;
        rdfs:label "Precedes" ;
        rdfs:comment "State can temporally precede another state" ;
    ] .

logos:RequiresRelationshipShape
    a sh:NodeShape ;
    rdfs:label "REQUIRES Relationship Shape" ;
    rdfs:comment "Validates precondition relationships for processes" ;
    sh:targetClass logos:Process ;
    sh:property [
        sh:path logos:REQUIRES ;
        sh:class logos:State ;
        rdfs:label "Requires State" ;
        rdfs:comment "Process can require one or more precondition states" ;
    ] .

logos:CanPerformRelationshipShape
    a sh:NodeShape ;
    rdfs:label "CAN_PERFORM Relationship Shape" ;
    rdfs:comment "Validates capability relationships between entities and concepts" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:CAN_PERFORM ;
        sh:class logos:Concept ;
        rdfs:label "Can Perform" ;
        rdfs:comment "Entity can have capabilities defined by concepts" ;
    ] .

# Phase 2 P2-M3: Perception and Imagination Shapes

logos:PerceptionFrameShape
    a sh:NodeShape ;
    sh:targetClass logos:PerceptionFrame ;
    rdfs:label "Perception Frame Shape" ;
    rdfs:comment "Validates media frames from perception pipeline" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for perception frame" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "When the frame was captured" ;
    ] ;
    sh:property [
        sh:path logos:format ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Format" ;
        rdfs:comment "Media format (e.g., 'image/jpeg', 'video/mp4')" ;
    ] ;
    sh:property [
        sh:path logos:metadata ;
        sh:maxCount 1 ;
        rdfs:label "Metadata" ;
        rdfs:comment "Additional metadata about the frame" ;
    ] .

logos:ImaginedProcessShape
    a sh:NodeShape ;
    sh:targetClass logos:ImaginedProcess ;
    rdfs:label "Imagined Process Shape" ;
    rdfs:comment "Validates simulated processes from JEPA rollout" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for imagined process" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "When the simulation was run" ;
    ] ;
    sh:property [
        sh:path logos:capability_id ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Capability ID" ;
        rdfs:comment "ID of the capability being simulated" ;
    ] ;
    sh:property [
        sh:path logos:imagined ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:boolean ;
        sh:hasValue true ;
        rdfs:label "Imagined Flag" ;
        rdfs:comment "Must be true to indicate this is simulated, not actual" ;
    ] ;
    sh:property [
        sh:path logos:horizon ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        sh:minInclusive 1 ;
        rdfs:label "Horizon" ;
        rdfs:comment "Number of steps predicted" ;
    ] ;
    sh:property [
        sh:path logos:model_version ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Model Version" ;
        rdfs:comment "Version of the JEPA model used" ;
    ] .

logos:ImaginedStateShape
    a sh:NodeShape ;
    sh:targetClass logos:ImaginedState ;
    rdfs:label "Imagined State Shape" ;
    rdfs:comment "Validates predicted future states from simulation" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for imagined state" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "When the state was predicted" ;
    ] ;
    sh:property [
        sh:path logos:step ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        sh:minInclusive 0 ;
        rdfs:label "Step" ;
        rdfs:comment "Step number in the simulation sequence" ;
    ] ;
    sh:property [
        sh:path logos:confidence ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        sh:maxInclusive 1.0 ;
        rdfs:label "Confidence" ;
        rdfs:comment "Confidence score for this prediction (0.0 to 1.0)" ;
    ] ;
    sh:property [
        sh:path logos:metadata ;
        sh:maxCount 1 ;
        rdfs:label "Metadata" ;
        rdfs:comment "Additional metadata about the prediction" ;
    ] .
