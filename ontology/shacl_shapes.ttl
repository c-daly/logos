@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix logos: <http://logos.ontology/> .

# LOGOS HCG SHACL Shapes â€” Level 1 Deterministic Validation
# See Project LOGOS spec: Section 4.3.1 (SHACL shapes for validation).
# Minimal, syntactically valid scaffold to be extended per spec.

# Entity shape with extended properties for pick-and-place domain
logos:EntityShape
    a sh:NodeShape ;
    sh:targetClass logos:Entity ;
    rdfs:label "Entity Shape" ;
    rdfs:comment "Validates concrete objects and agents in the world" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^entity-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for entity, must start with 'entity-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
    ] ;
    sh:property [
        sh:path logos:description ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Description" ;
    ] ;
    sh:property [
        sh:path logos:created_at ;
        sh:maxCount 1 ;
        rdfs:label "Creation Timestamp" ;
    ] .

# Concept shape with extended constraints
logos:ConceptShape
    a sh:NodeShape ;
    sh:targetClass logos:Concept ;
    rdfs:label "Concept Shape" ;
    rdfs:comment "Validates abstract categories and types" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^concept-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for concept, must start with 'concept-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
        rdfs:comment "Unique name for concept" ;
    ] ;
    sh:property [
        sh:path logos:description ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Description" ;
    ] .

# State shape with temporal and spatial property constraints
logos:StateShape
    a sh:NodeShape ;
    sh:targetClass logos:State ;
    rdfs:label "State Shape" ;
    rdfs:comment "Validates temporal snapshots of entity properties" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^state-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for state, must start with 'state-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "Time when this state occurred" ;
    ] ;
    sh:property [
        sh:path logos:position_x ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Position X coordinate" ;
    ] ;
    sh:property [
        sh:path logos:position_y ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Position Y coordinate" ;
    ] ;
    sh:property [
        sh:path logos:position_z ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Position Z coordinate" ;
    ] ;
    sh:property [
        sh:path logos:orientation_roll ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Orientation roll angle" ;
    ] ;
    sh:property [
        sh:path logos:orientation_pitch ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Orientation pitch angle" ;
    ] ;
    sh:property [
        sh:path logos:orientation_yaw ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Orientation yaw angle" ;
    ] .

# Process shape with temporal and causal constraints
logos:ProcessShape
    a sh:NodeShape ;
    sh:targetClass logos:Process ;
    rdfs:label "Process Shape" ;
    rdfs:comment "Validates causal transformations between states" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^process-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for process, must start with 'process-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
    ] ;
    sh:property [
        sh:path logos:description ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Description" ;
    ] ;
    sh:property [
        sh:path logos:start_time ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Start Time" ;
        rdfs:comment "Time when process started" ;
    ] ;
    sh:property [
        sh:path logos:duration_ms ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        rdfs:label "Duration (milliseconds)" ;
        rdfs:comment "Process duration in milliseconds" ;
    ] .

# Additional domain-specific shapes for pick-and-place

# Spatial properties validation
logos:SpatialPropertiesShape
    a sh:NodeShape ;
    rdfs:label "Spatial Properties Shape" ;
    rdfs:comment "Validates spatial properties like position and orientation" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:width ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Width" ;
    ] ;
    sh:property [
        sh:path logos:height ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Height" ;
    ] ;
    sh:property [
        sh:path logos:depth ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Depth" ;
    ] ;
    sh:property [
        sh:path logos:radius ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Radius" ;
    ] ;
    sh:property [
        sh:path logos:mass ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Mass (kg)" ;
    ] .

# Gripper-specific properties validation
logos:GripperPropertiesShape
    a sh:NodeShape ;
    rdfs:label "Gripper Properties Shape" ;
    rdfs:comment "Validates gripper-specific properties" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:max_grasp_width ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Maximum Grasp Width" ;
    ] ;
    sh:property [
        sh:path logos:max_force ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Maximum Force (N)" ;
    ] .

# Joint-specific properties validation
logos:JointPropertiesShape
    a sh:NodeShape ;
    rdfs:label "Joint Properties Shape" ;
    rdfs:comment "Validates joint-specific properties" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:joint_type ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ( "revolute" "prismatic" "fixed" "continuous" ) ;
        rdfs:label "Joint Type" ;
    ] ;
    sh:property [
        sh:path logos:min_angle ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Minimum Angle (radians)" ;
    ] ;
    sh:property [
        sh:path logos:max_angle ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        rdfs:label "Maximum Angle (radians)" ;
    ] .

# Relationship validation shapes

logos:IsARelationshipShape
    a sh:NodeShape ;
    rdfs:label "IS_A Relationship Shape" ;
    rdfs:comment "Validates type membership relationships" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:IS_A ;
        sh:class logos:Concept ;
        rdfs:label "Type Membership" ;
        rdfs:comment "Entity must be instance of a Concept" ;
    ] .

logos:HasStateRelationshipShape
    a sh:NodeShape ;
    rdfs:label "HAS_STATE Relationship Shape" ;
    rdfs:comment "Validates entity-state relationships" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:HAS_STATE ;
        sh:class logos:State ;
        rdfs:label "Current State" ;
        rdfs:comment "Entity can have one or more states" ;
    ] .

logos:CausesRelationshipShape
    a sh:NodeShape ;
    rdfs:label "CAUSES Relationship Shape" ;
    rdfs:comment "Validates process-state causal relationships" ;
    sh:targetClass logos:Process ;
    sh:property [
        sh:path logos:CAUSES ;
        sh:class logos:State ;
        rdfs:label "Causes State" ;
        rdfs:comment "Process must cause at least one state" ;
    ] .

logos:PartOfRelationshipShape
    a sh:NodeShape ;
    rdfs:label "PART_OF Relationship Shape" ;
    rdfs:comment "Validates compositional hierarchy between entities" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:PART_OF ;
        sh:class logos:Entity ;
        rdfs:label "Part Of" ;
        rdfs:comment "Entity can be part of another entity" ;
    ] .

logos:LocatedAtRelationshipShape
    a sh:NodeShape ;
    rdfs:label "LOCATED_AT Relationship Shape" ;
    rdfs:comment "Validates spatial relationships between entities" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:LOCATED_AT ;
        sh:class logos:Entity ;
        rdfs:label "Located At" ;
        rdfs:comment "Entity can be located at another entity" ;
    ] .

logos:AttachedToRelationshipShape
    a sh:NodeShape ;
    rdfs:label "ATTACHED_TO Relationship Shape" ;
    rdfs:comment "Validates physical attachment between entities" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:ATTACHED_TO ;
        sh:class logos:Entity ;
        rdfs:label "Attached To" ;
        rdfs:comment "Entity can be physically attached to another entity" ;
    ] .

logos:PrecedesRelationshipShape
    a sh:NodeShape ;
    rdfs:label "PRECEDES Relationship Shape" ;
    rdfs:comment "Validates temporal ordering between states" ;
    sh:targetClass logos:State ;
    sh:property [
        sh:path logos:PRECEDES ;
        sh:class logos:State ;
        rdfs:label "Precedes" ;
        rdfs:comment "State can temporally precede another state" ;
    ] .

logos:RequiresRelationshipShape
    a sh:NodeShape ;
    rdfs:label "REQUIRES Relationship Shape" ;
    rdfs:comment "Validates precondition relationships for processes" ;
    sh:targetClass logos:Process ;
    sh:property [
        sh:path logos:REQUIRES ;
        sh:class logos:State ;
        rdfs:label "Requires State" ;
        rdfs:comment "Process can require one or more precondition states" ;
    ] .

logos:CanPerformRelationshipShape
    a sh:NodeShape ;
    rdfs:label "CAN_PERFORM Relationship Shape" ;
    rdfs:comment "Validates capability relationships between entities and concepts" ;
    sh:targetClass logos:Entity ;
    sh:property [
        sh:path logos:CAN_PERFORM ;
        sh:class logos:Concept ;
        rdfs:label "Can Perform" ;
        rdfs:comment "Entity can have capabilities defined by concepts" ;
    ] .

# Phase 2 P2-M3: Perception and Imagination Shapes

logos:PerceptionFrameShape
    a sh:NodeShape ;
    sh:targetClass logos:PerceptionFrame ;
    rdfs:label "Perception Frame Shape" ;
    rdfs:comment "Validates media frames from perception pipeline" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for perception frame" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "When the frame was captured" ;
    ] ;
    sh:property [
        sh:path logos:format ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Format" ;
        rdfs:comment "Media format (e.g., 'image/jpeg', 'video/mp4')" ;
    ] ;
    sh:property [
        sh:path logos:metadata ;
        sh:maxCount 1 ;
        rdfs:label "Metadata" ;
        rdfs:comment "Additional metadata about the frame" ;
    ] .

# Phase 2 P2-M3: MediaSample Shape (media ingestion)
logos:MediaSampleShape
    a sh:NodeShape ;
    sh:targetClass logos:MediaSample ;
    rdfs:label "Media Sample Shape" ;
    rdfs:comment "Validates ingested media samples (images, video, audio)" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for media sample" ;
    ] ;
    sh:property [
        sh:path logos:media_type ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ("image" "video" "audio" "video_frame") ;
        rdfs:label "Media Type" ;
        rdfs:comment "Type of media: image, video, audio, or video_frame" ;
    ] ;
    sh:property [
        sh:path logos:file_path ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "File Path" ;
        rdfs:comment "Storage path (local or object storage URL)" ;
    ] ;
    sh:property [
        sh:path logos:file_size ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        rdfs:label "File Size" ;
        rdfs:comment "File size in bytes" ;
    ] ;
    sh:property [
        sh:path logos:file_hash ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "File Hash" ;
        rdfs:comment "SHA256 hash of file content for deduplication" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "When the sample was ingested" ;
    ] ;
    sh:property [
        sh:path logos:mime_type ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "MIME Type" ;
        rdfs:comment "MIME type (e.g., image/jpeg, video/mp4)" ;
    ] ;
    sh:property [
        sh:path logos:original_filename ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Original Filename" ;
        rdfs:comment "Original filename from upload" ;
    ] ;
    sh:property [
        sh:path logos:width ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        rdfs:label "Width" ;
        rdfs:comment "Width in pixels (for images/video)" ;
    ] ;
    sh:property [
        sh:path logos:height ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        rdfs:label "Height" ;
        rdfs:comment "Height in pixels (for images/video)" ;
    ] ;
    sh:property [
        sh:path logos:duration_ms ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        rdfs:label "Duration (ms)" ;
        rdfs:comment "Duration in milliseconds (for audio/video)" ;
    ] ;
    sh:property [
        sh:path logos:frame_index ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        rdfs:label "Frame Index" ;
        rdfs:comment "Frame number (for video_frame type)" ;
    ] ;
    sh:property [
        sh:path logos:question ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Perception Question" ;
        rdfs:comment "Optional question for perception pipeline" ;
    ] .

logos:ImaginedProcessShape
    a sh:NodeShape ;
    sh:targetClass logos:ImaginedProcess ;
    rdfs:label "Imagined Process Shape" ;
    rdfs:comment "Validates simulated processes from JEPA rollout" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for imagined process" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "When the simulation was run" ;
    ] ;
    sh:property [
        sh:path logos:capability_id ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Capability ID" ;
        rdfs:comment "ID of the capability being simulated" ;
    ] ;
    sh:property [
        sh:path logos:imagined ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:boolean ;
        sh:hasValue true ;
        rdfs:label "Imagined Flag" ;
        rdfs:comment "Must be true to indicate this is simulated, not actual" ;
    ] ;
    sh:property [
        sh:path logos:horizon ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        sh:minInclusive 1 ;
        rdfs:label "Horizon" ;
        rdfs:comment "Number of steps predicted" ;
    ] ;
    sh:property [
        sh:path logos:model_version ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Model Version" ;
        rdfs:comment "Version of the JEPA model used" ;
    ] .

logos:ImaginedStateShape
    a sh:NodeShape ;
    sh:targetClass logos:ImaginedState ;
    rdfs:label "Imagined State Shape" ;
    rdfs:comment "Validates predicted future states from simulation" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for imagined state" ;
    ] ;
    sh:property [
        sh:path logos:timestamp ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Timestamp" ;
        rdfs:comment "When the state was predicted" ;
    ] ;
    sh:property [
        sh:path logos:step ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        sh:minInclusive 0 ;
        rdfs:label "Step" ;
        rdfs:comment "Step number in the simulation sequence" ;
    ] ;
    sh:property [
        sh:path logos:confidence ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        sh:maxInclusive 1.0 ;
        rdfs:label "Confidence" ;
        rdfs:comment "Confidence score for this prediction (0.0 to 1.0)" ;
    ] ;
    sh:property [
        sh:path logos:metadata ;
        sh:maxCount 1 ;
        rdfs:label "Metadata" ;
        rdfs:comment "Additional metadata about the prediction" ;
    ] .

# Phase 2: Capability Catalog Shapes (logos#284)
# Validates tool/process definitions for Sophia planning

logos:CapabilityShape
    a sh:NodeShape ;
    sh:targetClass logos:Capability ;
    rdfs:label "Capability Shape" ;
    rdfs:comment "Validates capability/tool definitions for planner consumption" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^capability-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for capability, must start with 'capability-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
        rdfs:comment "Unique name for capability" ;
    ] ;
    sh:property [
        sh:path logos:description ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Description" ;
        rdfs:comment "Human-readable description of what the capability does" ;
    ] ;
    sh:property [
        sh:path logos:executor_type ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ( "human" "talos" "service" "llm" ) ;
        rdfs:label "Executor Type" ;
        rdfs:comment "Type of executor: human (instructions), talos (robot), service (API), llm (reasoning)" ;
    ] ;
    sh:property [
        sh:path logos:capability_tags ;
        sh:datatype xsd:string ;
        rdfs:label "Capability Tags" ;
        rdfs:comment "Tags for capability discovery (e.g., 'manipulation', 'navigation', 'communication')" ;
    ] ;
    sh:property [
        sh:path logos:version ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Version" ;
        rdfs:comment "Semantic version of the capability definition" ;
    ] ;
    sh:property [
        sh:path logos:deprecated ;
        sh:maxCount 1 ;
        sh:datatype xsd:boolean ;
        rdfs:label "Deprecated" ;
        rdfs:comment "Whether this capability is deprecated" ;
    ] ;
    sh:property [
        sh:path logos:created_at ;
        sh:maxCount 1 ;
        rdfs:label "Created At" ;
        rdfs:comment "When the capability was registered" ;
    ] ;
    sh:property [
        sh:path logos:updated_at ;
        sh:maxCount 1 ;
        rdfs:label "Updated At" ;
        rdfs:comment "When the capability was last modified" ;
    ] .

# Capability performance metrics shape
logos:CapabilityPerformanceShape
    a sh:NodeShape ;
    sh:targetClass logos:Capability ;
    rdfs:label "Capability Performance Shape" ;
    rdfs:comment "Validates performance metrics for capabilities" ;
    sh:property [
        sh:path logos:estimated_duration_ms ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        sh:minInclusive 0 ;
        rdfs:label "Estimated Duration (ms)" ;
        rdfs:comment "Typical execution time in milliseconds" ;
    ] ;
    sh:property [
        sh:path logos:estimated_cost ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Estimated Cost" ;
        rdfs:comment "Relative cost metric for planning optimization" ;
    ] ;
    sh:property [
        sh:path logos:success_rate ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        sh:maxInclusive 1.0 ;
        rdfs:label "Success Rate" ;
        rdfs:comment "Historical success rate (0.0 to 1.0)" ;
    ] ;
    sh:property [
        sh:path logos:invocation_count ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        sh:minInclusive 0 ;
        rdfs:label "Invocation Count" ;
        rdfs:comment "Number of times this capability has been used" ;
    ] .

# Capability integration shape (executor-specific properties)
logos:CapabilityIntegrationShape
    a sh:NodeShape ;
    sh:targetClass logos:Capability ;
    rdfs:label "Capability Integration Shape" ;
    rdfs:comment "Validates executor-specific integration properties" ;
    sh:property [
        sh:path logos:service_endpoint ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Service Endpoint" ;
        rdfs:comment "URL for service-type capabilities" ;
    ] ;
    sh:property [
        sh:path logos:action_name ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Action Name" ;
        rdfs:comment "ROS action name for talos-type capabilities" ;
    ] ;
    sh:property [
        sh:path logos:instruction_template ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Instruction Template" ;
        rdfs:comment "Template for generating human instructions" ;
    ] ;
    sh:property [
        sh:path logos:prompt_template ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Prompt Template" ;
        rdfs:comment "Template for LLM-type capabilities" ;
    ] .

# Capability relationship shapes

logos:ImplementsRelationshipShape
    a sh:NodeShape ;
    rdfs:label "IMPLEMENTS Relationship Shape" ;
    rdfs:comment "Validates capability-to-concept implementation relationships" ;
    sh:targetClass logos:Capability ;
    sh:property [
        sh:path logos:IMPLEMENTS ;
        sh:class logos:Concept ;
        rdfs:label "Implements" ;
        rdfs:comment "Capability implements an action concept (e.g., GraspAction)" ;
    ] .

logos:RequiresInputRelationshipShape
    a sh:NodeShape ;
    rdfs:label "REQUIRES_INPUT Relationship Shape" ;
    rdfs:comment "Validates capability input requirements" ;
    sh:targetClass logos:Capability ;
    sh:property [
        sh:path logos:REQUIRES_INPUT ;
        sh:class logos:Concept ;
        rdfs:label "Requires Input" ;
        rdfs:comment "Capability requires this input type" ;
    ] .

logos:ProducesOutputRelationshipShape
    a sh:NodeShape ;
    rdfs:label "PRODUCES_OUTPUT Relationship Shape" ;
    rdfs:comment "Validates capability output specifications" ;
    sh:targetClass logos:Capability ;
    sh:property [
        sh:path logos:PRODUCES_OUTPUT ;
        sh:class logos:Concept ;
        rdfs:label "Produces Output" ;
        rdfs:comment "Capability produces this output type" ;
    ] .

logos:ExecutedByRelationshipShape
    a sh:NodeShape ;
    rdfs:label "EXECUTED_BY Relationship Shape" ;
    rdfs:comment "Validates capability-to-entity execution relationships" ;
    sh:targetClass logos:Capability ;
    sh:property [
        sh:path logos:EXECUTED_BY ;
        sh:class logos:Entity ;
        rdfs:label "Executed By" ;
        rdfs:comment "Entity that can execute this capability" ;
    ] .

logos:UsesCapabilityRelationshipShape
    a sh:NodeShape ;
    rdfs:label "USES_CAPABILITY Relationship Shape" ;
    rdfs:comment "Validates process-to-capability usage relationships" ;
    sh:targetClass logos:Process ;
    sh:property [
        sh:path logos:USES_CAPABILITY ;
        sh:class logos:Capability ;
        rdfs:label "Uses Capability" ;
        rdfs:comment "Process step uses this capability" ;
    ] .

# CWM-A: Abstract/Associative World Model Shapes (logos#288)
# Validates symbolic knowledge nodes for commonsense reasoning

logos:FactShape
    a sh:NodeShape ;
    sh:targetClass logos:Fact ;
    rdfs:label "Fact Shape" ;
    rdfs:comment "Validates declarative statements in CWM-A" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^fact-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for fact, must start with 'fact-'" ;
    ] ;
    sh:property [
        sh:path logos:subject ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Subject" ;
        rdfs:comment "Subject of the statement" ;
    ] ;
    sh:property [
        sh:path logos:predicate ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Predicate" ;
        rdfs:comment "Relationship or property" ;
    ] ;
    sh:property [
        sh:path logos:object ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Object" ;
        rdfs:comment "Object or value of the statement" ;
    ] ;
    sh:property [
        sh:path logos:confidence ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        sh:maxInclusive 1.0 ;
        rdfs:label "Confidence" ;
        rdfs:comment "Confidence score (0.0 to 1.0)" ;
    ] ;
    sh:property [
        sh:path logos:status ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ( "hypothesis" "proposed" "canonical" "deprecated" ) ;
        rdfs:label "Status" ;
        rdfs:comment "Lifecycle status of the fact" ;
    ] ;
    sh:property [
        sh:path logos:source ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Source" ;
        rdfs:comment "Where the fact came from" ;
    ] ;
    sh:property [
        sh:path logos:source_type ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ( "knowledge_base" "observation" "inference" "human" ) ;
        rdfs:label "Source Type" ;
        rdfs:comment "Type of source for the fact" ;
    ] ;
    sh:property [
        sh:path logos:valid_from ;
        sh:maxCount 1 ;
        rdfs:label "Valid From" ;
        rdfs:comment "Temporal validity start" ;
    ] ;
    sh:property [
        sh:path logos:valid_until ;
        sh:maxCount 1 ;
        rdfs:label "Valid Until" ;
        rdfs:comment "Temporal validity end" ;
    ] ;
    sh:property [
        sh:path logos:domain ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Domain" ;
        rdfs:comment "Knowledge domain (e.g., 'manipulation', 'navigation')" ;
    ] ;
    sh:property [
        sh:path logos:created_at ;
        sh:maxCount 1 ;
        rdfs:label "Created At" ;
        rdfs:comment "When the fact was created" ;
    ] ;
    sh:property [
        sh:path logos:updated_at ;
        sh:maxCount 1 ;
        rdfs:label "Updated At" ;
        rdfs:comment "When the fact was last modified" ;
    ] .

logos:AssociationShape
    a sh:NodeShape ;
    sh:targetClass logos:Association ;
    rdfs:label "Association Shape" ;
    rdfs:comment "Validates weighted links between concepts in CWM-A" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^assoc-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for association, must start with 'assoc-'" ;
    ] ;
    sh:property [
        sh:path logos:source_concept ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Source Concept" ;
        rdfs:comment "Origin concept name or uuid" ;
    ] ;
    sh:property [
        sh:path logos:target_concept ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Target Concept" ;
        rdfs:comment "Target concept name or uuid" ;
    ] ;
    sh:property [
        sh:path logos:strength ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        sh:maxInclusive 1.0 ;
        rdfs:label "Strength" ;
        rdfs:comment "Association strength (0.0 to 1.0)" ;
    ] ;
    sh:property [
        sh:path logos:relationship_type ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Relationship Type" ;
        rdfs:comment "Type of association (e.g., 'temporal', 'causal', 'semantic')" ;
    ] ;
    sh:property [
        sh:path logos:bidirectional ;
        sh:maxCount 1 ;
        sh:datatype xsd:boolean ;
        rdfs:label "Bidirectional" ;
        rdfs:comment "Whether the association is symmetric" ;
    ] ;
    sh:property [
        sh:path logos:context ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Context" ;
        rdfs:comment "Context where association is valid" ;
    ] ;
    sh:property [
        sh:path logos:source ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Source" ;
        rdfs:comment "How the association was learned" ;
    ] ;
    sh:property [
        sh:path logos:decay_rate ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        rdfs:label "Decay Rate" ;
        rdfs:comment "Strength decay per day" ;
    ] ;
    sh:property [
        sh:path logos:created_at ;
        sh:maxCount 1 ;
        rdfs:label "Created At" ;
        rdfs:comment "When the association was created" ;
    ] .

logos:AbstractionShape
    a sh:NodeShape ;
    sh:targetClass logos:Abstraction ;
    rdfs:label "Abstraction Shape" ;
    rdfs:comment "Validates higher-order concepts in CWM-A" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^abs-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for abstraction, must start with 'abs-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
        rdfs:comment "Unique name for abstraction" ;
    ] ;
    sh:property [
        sh:path logos:description ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Description" ;
        rdfs:comment "Human-readable description" ;
    ] ;
    sh:property [
        sh:path logos:level ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        sh:minInclusive 0 ;
        rdfs:label "Level" ;
        rdfs:comment "Hierarchy level (0=concrete, higher=more abstract)" ;
    ] ;
    sh:property [
        sh:path logos:domain ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Domain" ;
        rdfs:comment "Knowledge domain" ;
    ] ;
    sh:property [
        sh:path logos:created_at ;
        sh:maxCount 1 ;
        rdfs:label "Created At" ;
        rdfs:comment "When the abstraction was created" ;
    ] .

logos:RuleShape
    a sh:NodeShape ;
    sh:targetClass logos:Rule ;
    rdfs:label "Rule Shape" ;
    rdfs:comment "Validates conditional inference rules in CWM-A" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^rule-.*" ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for rule, must start with 'rule-'" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
        rdfs:comment "Rule name" ;
    ] ;
    sh:property [
        sh:path logos:condition ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Condition" ;
        rdfs:comment "Condition expression (when rule applies)" ;
    ] ;
    sh:property [
        sh:path logos:consequent ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Consequent" ;
        rdfs:comment "Consequent expression (what happens)" ;
    ] ;
    sh:property [
        sh:path logos:rule_type ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:in ( "constraint" "preference" "inference" "default" ) ;
        rdfs:label "Rule Type" ;
        rdfs:comment "Type: constraint (must), preference (should), inference (derives), default (unless overridden)" ;
    ] ;
    sh:property [
        sh:path logos:priority ;
        sh:maxCount 1 ;
        sh:datatype xsd:integer ;
        sh:minInclusive 0 ;
        rdfs:label "Priority" ;
        rdfs:comment "Priority for conflict resolution (higher = more important)" ;
    ] ;
    sh:property [
        sh:path logos:confidence ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        sh:maxInclusive 1.0 ;
        rdfs:label "Confidence" ;
        rdfs:comment "Rule reliability score" ;
    ] ;
    sh:property [
        sh:path logos:domain ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Domain" ;
        rdfs:comment "Applicable domain" ;
    ] ;
    sh:property [
        sh:path logos:created_at ;
        sh:maxCount 1 ;
        rdfs:label "Created At" ;
        rdfs:comment "When the rule was created" ;
    ] .

# CWM-A Relationship Shapes

logos:FactAboutRelationshipShape
    a sh:NodeShape ;
    rdfs:label "ABOUT Relationship Shape" ;
    rdfs:comment "Validates fact-to-concept/entity relationships" ;
    sh:targetClass logos:Fact ;
    sh:property [
        sh:path logos:ABOUT ;
        rdfs:label "About" ;
        rdfs:comment "Fact concerns this concept or entity" ;
    ] .

logos:FactSupportsRelationshipShape
    a sh:NodeShape ;
    rdfs:label "SUPPORTS Relationship Shape (Fact)" ;
    rdfs:comment "Validates fact-to-process support relationships" ;
    sh:targetClass logos:Fact ;
    sh:property [
        sh:path logos:SUPPORTS ;
        sh:class logos:Process ;
        rdfs:label "Supports" ;
        rdfs:comment "Fact supports this process/plan step" ;
    ] .

logos:FactContradictsRelationshipShape
    a sh:NodeShape ;
    rdfs:label "CONTRADICTS Relationship Shape" ;
    rdfs:comment "Validates fact conflict relationships" ;
    sh:targetClass logos:Fact ;
    sh:property [
        sh:path logos:CONTRADICTS ;
        sh:class logos:Fact ;
        rdfs:label "Contradicts" ;
        rdfs:comment "Fact is in conflict with this fact" ;
    ] .

logos:FactSupersedesRelationshipShape
    a sh:NodeShape ;
    rdfs:label "SUPERSEDES Relationship Shape" ;
    rdfs:comment "Validates fact replacement relationships" ;
    sh:targetClass logos:Fact ;
    sh:property [
        sh:path logos:SUPERSEDES ;
        sh:class logos:Fact ;
        rdfs:label "Supersedes" ;
        rdfs:comment "Newer fact replaces this older fact" ;
    ] .

logos:FactDerivedFromRelationshipShape
    a sh:NodeShape ;
    rdfs:label "DERIVED_FROM Relationship Shape" ;
    rdfs:comment "Validates fact provenance relationships" ;
    sh:targetClass logos:Fact ;
    sh:property [
        sh:path logos:DERIVED_FROM ;
        rdfs:label "Derived From" ;
        rdfs:comment "Fact was derived from this source (Fact or PerceptionFrame)" ;
    ] .

logos:AbstractionGeneralizesRelationshipShape
    a sh:NodeShape ;
    rdfs:label "GENERALIZES Relationship Shape" ;
    rdfs:comment "Validates abstraction-to-concept generalization" ;
    sh:targetClass logos:Abstraction ;
    sh:property [
        sh:path logos:GENERALIZES ;
        sh:class logos:Concept ;
        rdfs:label "Generalizes" ;
        rdfs:comment "Abstraction generalizes these lower-level concepts" ;
    ] .

logos:AbstractionPartOfRelationshipShape
    a sh:NodeShape ;
    rdfs:label "PART_OF Relationship Shape (Abstraction)" ;
    rdfs:comment "Validates abstraction hierarchy" ;
    sh:targetClass logos:Abstraction ;
    sh:property [
        sh:path logos:PART_OF ;
        sh:class logos:Abstraction ;
        rdfs:label "Part Of" ;
        rdfs:comment "Abstraction is part of a higher-level abstraction" ;
    ] .

logos:RuleAppliesToRelationshipShape
    a sh:NodeShape ;
    rdfs:label "APPLIES_TO Relationship Shape (Rule)" ;
    rdfs:comment "Validates rule scope relationships" ;
    sh:targetClass logos:Rule ;
    sh:property [
        sh:path logos:APPLIES_TO ;
        rdfs:label "Applies To" ;
        rdfs:comment "Rule applies to this concept or entity" ;
    ] .

logos:RuleTriggersRelationshipShape
    a sh:NodeShape ;
    rdfs:label "TRIGGERS Relationship Shape" ;
    rdfs:comment "Validates chained rule relationships" ;
    sh:targetClass logos:Rule ;
    sh:property [
        sh:path logos:TRIGGERS ;
        sh:class logos:Rule ;
        rdfs:label "Triggers" ;
        rdfs:comment "This rule triggers another rule" ;
    ] .

logos:RuleConflictsWithRelationshipShape
    a sh:NodeShape ;
    rdfs:label "CONFLICTS_WITH Relationship Shape" ;
    rdfs:comment "Validates mutually exclusive rule relationships" ;
    sh:targetClass logos:Rule ;
    sh:property [
        sh:path logos:CONFLICTS_WITH ;
        sh:class logos:Rule ;
        rdfs:label "Conflicts With" ;
        rdfs:comment "This rule is mutually exclusive with another rule" ;
    ] .

logos:RulePartOfRelationshipShape
    a sh:NodeShape ;
    rdfs:label "PART_OF Relationship Shape (Rule)" ;
    rdfs:comment "Validates rule grouping under abstraction" ;
    sh:targetClass logos:Rule ;
    sh:property [
        sh:path logos:PART_OF ;
        sh:class logos:Abstraction ;
        rdfs:label "Part Of" ;
        rdfs:comment "Rule is grouped under this abstraction" ;
    ] .
