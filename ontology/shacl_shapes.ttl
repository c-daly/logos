@prefix logos: <http://logos.ai/ontology#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

# LOGOS Flexible Ontology - SHACL Shapes
# Validates graph structure for the flexible type system.
# See docs/plans/2025-12-30-flexible-ontology-design.md for full specification.
#
# Layered validation approach:
# - SHACL: Graph structure (all nodes have required properties)
# - JSON Schema: Content validation at Hermes boundary (properties match type's schema)

# === Core Node Shape ===
# All nodes must have uuid, name, is_type_definition, type, and ancestors properties
logos:NodeShape a sh:NodeShape ;
    sh:targetClass logos:Node ;
    rdfs:label "Node Shape" ;
    rdfs:comment "Validates all nodes in the flexible ontology" ;
    sh:property [
        sh:path logos:uuid ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "UUID" ;
        rdfs:comment "Unique identifier for the node" ;
    ] ;
    sh:property [
        sh:path logos:name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Name" ;
        rdfs:comment "Human-readable name for the node" ;
    ] ;
    sh:property [
        sh:path logos:is_type_definition ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:boolean ;
        rdfs:label "Is Type Definition" ;
        rdfs:comment "True if this node defines a type, false if it's an instance" ;
    ] ;
    sh:property [
        sh:path logos:type ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        rdfs:label "Type" ;
        rdfs:comment "Immediate type of the node" ;
    ] ;
    sh:property [
        sh:path logos:ancestors ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        rdfs:label "Ancestors" ;
        rdfs:comment "List of ancestor types from parent to bootstrap root" ;
    ] .

# === IS_A Relationship Shape ===
# Validates type hierarchy relationships
logos:IsARelationshipShape a sh:NodeShape ;
    sh:targetClass logos:Node ;
    rdfs:label "IS_A Relationship Shape" ;
    rdfs:comment "Validates type membership via IS_A edges" ;
    sh:property [
        sh:path logos:IS_A ;
        sh:class logos:Node ;
        rdfs:label "Is A" ;
        rdfs:comment "Node's type in the type hierarchy" ;
    ] .
